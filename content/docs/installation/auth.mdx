---
title: Auth
description: Setting up Auth for HA API access.
---

## Intro
This Auth setup is written around the default Home Assistant OAuth flow.

<Tabs items={['npm', 'pnpm', 'yarn', 'bun']}>
  <Tab value="npm">    
    ```bash
    npx shadcn@latest add @ha-components/auth
    ```
  </Tab>
  <Tab value="pnpm">
    ```bash
    pnpm dlx shadcn@latest add @ha-components/auth
    ```
  </Tab>
  <Tab value="yarn">
    ```bash
    yarn shadcn@latest add @ha-components/auth
    ```
  </Tab>
  <Tab value="bun">
    ```bash
    bunx --bun shadcn@latest add @ha-components/auth
    ```
  </Tab>
</Tabs>

## Step 1: Environment Variables
Set the Environment variables to match your home assistant config
<Tabs items={['NEXT.js', 'Vite', 'Tanstack Start']}>
  <Tab value="NEXT.js">    
    ```dotenv
    # Example Home Assistant host + port
    NEXT_PUBLIC_HA_URL=homeassistant.local
    NEXT_PUBLIC_HA_PORT=8123
    ```
    
    Then set `NEXT_PUBLIC_HA_CLIENT_ID` to your dashboard host 

    ```dotenv
    # Example OAuth2 client info
    NEXT_PUBLIC_HA_CLIENT_ID=http://localhost:3000
    ```

    For development, you can set a Long-lived access token, which will override any OAuth flow.
    ```dotenv
    NEXT_PUBLIC_HA_LONG_LIVED_TOKEN="your_token_here"
    ```
    <Callout type="error">
      **Using a long-lived token in production is not recommended.**
    </Callout>
  </Tab>
  <Tab value="Vite">
    ```dotenv
    # Example Home Assistant host + port
    VITE_HA_URL=homeassistant.local
    VITE_PUBLIC_HA_PORT=8123
    ```

    Then set `VITE_HA_CLIENT_ID` to your host 
    ```dotenv
    # Example OAuth2 client info
    VITE_HA_CLIENT_ID=http://localhost:3000
    ```

    For testing, you can set a Long-lived access token, which will override any OAuth flow.
    ```dotenv
    VITE_HA_LONG_LIVED_TOKEN="your_token_here"
    ```
    <Callout type="error">
      **Using a long-lived token in production is not recommended.**
    </Callout>
  </Tab>
  <Tab value="Tanstack Start">
    ```dotenv
    # Example Home Assistant host + port
    VITE_HA_URL=homeassistant.local
    VITE_PUBLIC_HA_PORT=8123
    ```

    Then set `VITE_HA_CLIENT_ID` to your host 

    ```dotenv
    # Example OAuth2 client info
    VITE_HA_CLIENT_ID=http://localhost:3000
    ```

    For testing, you can set a Long-lived access token, which will override any OAuth flow.
    ```dotenv
    VITE_HA_LONG_LIVED_TOKEN="your_token_here"
    ```
    <Callout type="error">
      **Using a long-lived token in production is not recommended.**
    </Callout>
  </Tab>
</Tabs>



## Step 2: HA Provider
Wrap children with `HomeAssistantProvider`.\
In NEXT.js this would be in `layout.tsx`.\
This allows child pages with the applied layout access the global websocket connection.
```jsx
import { HomeAssistantProvider } from "@/providers/HomeAssistantProvider";
return (    
    <div className="flex flex-col min-h-screen">
        <HomeAssistantProvider>{children}</HomeAssistantProvider>
    </div>
);
```

## Conclusion
If this is set up properly, then all components which require Auth will connect automatically to the global websocket.

If you came here from the installation instructions and want to go to the next step: [click here](/docs/installation/installation#step-4-setup-type-generation)
