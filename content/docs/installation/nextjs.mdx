---
title: NEXT.js Installation
description: How to install HA-Components in your NEXT.js app.
---

## Step 1: Setup ShadCN
HA-Components utilises many modified ShadCN components, hence this dependency.\
Follow the instructions here: [https://ui.shadcn.com/docs/installation](https://ui.shadcn.com/docs/installation)

## Step 2: Setup Auth Provider
### Step 2.1: Add Components
Add the Auth components: 
<Tabs items={['npm', 'pnpm', 'yarn', 'bun']}>
  <Tab value="npm">    
    ```bash
    npx shadcn@latest add @ha-components/auth
    ```
  </Tab>
  <Tab value="pnpm">
    ```bash
    pnpm dlx shadcn@latest add @ha-components/auth
    ```
  </Tab>
  <Tab value="yarn">
    ```bash
    yarn shadcn@latest add @ha-components/auth
    ```
  </Tab>
  <Tab value="bun">
    ```bash
    bunx --bun shadcn@latest add @ha-components/auth
    ```
  </Tab>
</Tabs>

### Step 2.2: Set `.env` variables

Set these variables to match your home assistant config
```dotenv
# Example Home Assistant host + port
NEXT_PUBLIC_HA_URL=homeassistant.local
NEXT_PUBLIC_HA_PORT=8123
```

Then set `NEXT_PUBLIC_HA_CLIENT_ID` to your dashboard host 

```dotenv
# Example OAuth2 client info
NEXT_PUBLIC_HA_CLIENT_ID=http://localhost:3000
```

### Step 2.3: HomeAssistantProvider
In layout.tsx, wrap children with `HomeAssistantProvider`.\
This allows pages with the applied layout access the global websocket connection.
```jsx
import { HomeAssistantProvider } from "@/providers/HomeAssistantProvider";
return (    
    <div className="flex flex-col min-h-screen">
        <HomeAssistantProvider>{children}</HomeAssistantProvider>
    </div>
);
```

### Optional Step: Long-lived Tokens
If you want to use an long-lived access token for development.
You can set it in `.env`as follows
```
NEXT_PUBLIC_HA_LONG_LIVED_TOKEN="your_token_here"
```
<Callout type="error">
  **Using a long-lived token in production is not recommended.**
</Callout>

You can find how to get a valid long-lived token [here](https://developers.home-assistant.io/docs/auth_api/#long-lived-access-token)


## Step 3: Setup Type Generation
HA Components includes a script automates entity name fetching.

<Callout>
  If your source code uses the /src folder structure,\
  You will need to edit the path in the script itself and in the command in step 2
</Callout>

- **Step 1:** Install Script
<Tabs items={['npm', 'pnpm', 'yarn', 'bun']}>
  <Tab value="npm">    
    ```bash
    npx shadcn@latest add @ha-components/type-generator
    ```
  </Tab>
  <Tab value="pnpm">
    ```bash
    pnpm dlx shadcn@latest add @ha-components/type-generator
    ```
  </Tab>
  <Tab value="yarn">
    ```bash
    yarn shadcn@latest add @ha-components/type-generator
    ```
  </Tab>
  <Tab value="bun">
    ```bash
    bunx --bun shadcn@latest add @ha-components/type-generator
    ```
  </Tab>
</Tabs>
- **Step 2:** Register script in `package.json`\
Add the script into `package.json`
```json
{
  "scripts": {
    "generate:entities": "tsx scripts/generate_entities.ts",
  },
}
```
- **Step 3:** Run the script\
    You can now run the script using the following command
    ```bash
    npm run generate:entities
    ```
    This will create a `types\entity-types.ts` file which contains the generated types

#### Misc
To regenerate your entity types, rerun Step 2

#### Optional: AUTH_TOKEN
If you set up OAuth instead of a long-lived token in step 3:\
Create an `.env` variable named `AUTH_TOKEN` and set it to a valid auth token. (e.g. long-lived token)\
e.g. `AUTH_TOKEN=VzHfnKDwMc...`

## Step 4: Add your components:
You can now start adding components to your project
<Tabs items={['npm', 'pnpm', 'yarn', 'bun']}>
  <Tab value="npm">    
    ```bash
    npx shadcn@latest add @ha-components/trigger
    ```
  </Tab>
  <Tab value="pnpm">
    ```bash
    pnpm dlx shadcn@latest add @ha-components/trigger
    ```
  </Tab>
  <Tab value="yarn">
    ```bash
    yarn shadcn@latest add @ha-components/trigger
    ```
  </Tab>
  <Tab value="bun">
    ```bash
    bunx --bun shadcn@latest add @ha-components/trigger
    ```
  </Tab>
</Tabs>