---
title: Camera
description: A customisable security camera video component.
---

import CameraPreview from "@/components/docs/camera-preview.tsx"

<Tabs items={['Preview', 'Code']}>
  <Tab value="Preview">    
    <CameraPreview />
  </Tab>
  <Tab value="Code">
    ```tsx lineNumbers
      import { Camera } from "@/components/ha-ui/camera";
      <Camera
          entity="camera.homeassistant_camera_video_entity"
          aspectRatio="4/3"
      />
    ```
  </Tab>
</Tabs>

<Callout type="warn">
  Preview video is mocked with a fixed source.
</Callout>

## About
This component provides a customisable video player using [media-chrome](https://www.media-chrome.org/)\
It handles negotiation from a [Go2RTC](https://github.com/AlexxIT/go2rtc) backend.

## Setup
### Installation
<Tabs items={['npm', 'pnpm', 'yarn', 'bun', 'Manual']}>
  <Tab value="npm">    
    ```bash
    npx shadcn@latest add @ha-components/camera
    ```
  </Tab>
  <Tab value="pnpm">
    ```bash
    pnpm dlx shadcn@latest add @ha-components/camera
    ```
  </Tab>
  <Tab value="yarn">
    ```bash
    yarn shadcn@latest add @ha-components/camera
    ```
  </Tab>
  <Tab value="bun">
    ```bash
    bunx --bun shadcn@latest add @ha-components/camera
    ```
  </Tab>
  <Tab value="Manual">
      TODO COMPLETE ME
  </Tab>
</Tabs>

### Enable Home Assistant Go2RTC API
<Callout type="warn">
  Go2RTC does not have authentication by default\
  This will expose port 11984 without any authentication\
  Use for internal networks only.
</Callout>

For development purposes, it can be easier to directly use HA's Go2RTC API.\
To enable it, add this to `configuration.yaml` as detailed [here](https://www.home-assistant.io/integrations/go2rtc/#debug_ui)
```yaml
go2rtc:
  debug_ui: true
```
Soft Restart HA to load its new config.\
If it worked, the Go2RTC UI should now be accessible at port 11984 [(Quick Link)](http://homeassistant.local:11984/)

To then stop your requests from being blocked, navigate to the [config](http://homeassistant.local:11984/editor.html).\
and add this to under api:
```yaml
api:
  origin: "*"
```
<Callout>
  Go2RTC only supports a wildcard, so you cannot just add a specific host to your origin.
</Callout>

<Callout type="error">
  Note: Do NOT USE HA's inbuilt go2rtc server IN PRODUCTION\
  HA will reset its internal go2rtc config after every restart.\
  It is strongly recommended to have a seperate go2rtc instance for production (e.g. via HACS)
 </Callout>


## API (Props)
### `entity`
e.g. `camera.reolink_doorbell_high`
- A HA Video entity name 
- If wsURL is set, this property is ignored

### `disableControls` (Optional)
- Disables media controls, use if you want the video to play headlessly.
- Set to false by default

### `wsURL` (Optional)
e.g. `"ws://192.168.0.114:1984/api/ws?src=camera.example"`
- An websocket URL used to override the default HA Go2RTC server url
- If used, you can set `entity` to any entity as a placeholder, it will not be accessed

### `aspectRatio` (Optional)
- Sets the Video Player aspect ratio (1/1, 16/9, 4/3)
- Defaults to 16/9

## Advanced API (Props)

### `externalCameraSource` (Optional)
- For sharing the same WebRTC camera feed between different camera components
- This will bypass internal `useWebRTC` negotiations.
- Expects an `WebRTCConnection` from `useWebRTC`, which can be found in `@\scripts\video-rtc.tsx`.

### `proxyURL` (Optional)
<Callout >
  Intended for use in development
</Callout>
- e.g. `"ws://localhost:8080/proxy"`
- If set the component will utilise a proxy server for the websocket connection

A simple Python proxy server for development is provided.
#### Installation
<Tabs items={['npm', 'pnpm', 'yarn', 'bun', 'Manual']}>
  <Tab value="npm">    
    ```bash
    npx shadcn@latest add @ha-components/proxy.json
    ```
  </Tab>
  <Tab value="pnpm">
    ```bash
    pnpm dlx shadcn@latest add @ha-components/proxy.json
    ```
  </Tab>
  <Tab value="yarn">
    ```bash
    yarn shadcn@latest add @ha-components/proxy.json
    ```
  </Tab>
  <Tab value="bun">
    ```bash
    bunx --bun shadcn@latest add @ha-components/proxy.json
    ```
  </Tab>
  <Tab value="Manual">
      TODO COMPLETE ME
  </Tab>
</Tabs>
To run it:
1. Install the dependencies
    - Either using uv given the [pyproject.toml](https://github.com/jchu634/ha-components/blob/main/pyproject.toml)
    - or you can install the dependencies manually:
    ```dotenv
      fastapi>=0.116.1  
      uvicorn>=0.35.0
      websockets>=15.0.1
    ```
2. Then run the script using
    ``` bash
      # Run via UV
      uv run uvicorn proxy_server:app --host 0.0.0.0 --port 8080

      # Run via python
      python -m uvicorn proxy_server:app --host 0.0.0.0 --port 8080
    ```


## Common Errors
### `HTTP/1.1 403 Forbidden` or `NS_ERROR_WEBSOCKET_CONNECTION_REFUSED`
Home Assistant's Go2RTC instance may reject the connection outright if the origin-header is wrong.\
To stop your requests from being blocked, navigate to the [config](http://homeassistant.local:11984/editor.html) and add this to under api:
```yaml
api:
  origin: "*"
```
Alternatively, utilise a proxy server via `proxyURL` to strip the origin-headers.\
Instructions for a simple python proxy-server are available in the Advanced API documentation under `proxyURL`




  