<html>
    <body>
        <h2>WebSocket Debugger</h2>
        <form id="ws-form" onsubmit="return false;">
            <label for="signal-url">WebSocket Server URL:</label>
            <input type="text" id="signal-url" value="wss://your-websocket-server.example/ws" size="50" />
            <button id="connect-btn">Connect</button>
            <button id="disconnect-btn" disabled>Disconnect</button>
        </form>
        <div style="margin-top:20px;">
            <textarea id="ws-send-msg" rows="3" cols="60" placeholder="Type message to send..."></textarea><br>
            <button id="send-btn" disabled>Send</button>
        </div>
        <div style="margin-top:20px;">
            <h3>Log</h3>
            <pre id="ws-log" style="background:#eee; padding:10px; max-height:300px; overflow:auto;"></pre>
        </div>
        <script>
        const connectBtn = document.getElementById('connect-btn');
        const disconnectBtn = document.getElementById('disconnect-btn');
        const signalInput = document.getElementById('signal-url');
        const sendBtn = document.getElementById('send-btn');
        const sendMsg = document.getElementById('ws-send-msg');
        const log = document.getElementById('ws-log');
        let ws;

        function logMsg(msg, type = 'info') {
            const time = new Date().toLocaleTimeString();
            log.textContent += `[${time}] ${type.toUpperCase()}: ${msg}\n`;
            log.scrollTop = log.scrollHeight;
        }

        connectBtn.onclick = () => {
            const url = signalInput.value;
            if (!url) {
                alert('Please enter a WebSocket server URL.');
                return;
            }
            connectBtn.disabled = true;
            disconnectBtn.disabled = false;
            sendBtn.disabled = false;
            ws = new WebSocket(url);

            ws.onopen = () => {
                logMsg('WebSocket connected', 'status');
            };
            ws.onmessage = (event) => {
                logMsg(event.data, 'recv');
            };
            ws.onclose = () => {
                logMsg('WebSocket closed', 'status');
                connectBtn.disabled = false;
                disconnectBtn.disabled = true;
                sendBtn.disabled = true;
            };
            ws.onerror = (e) => {
                logMsg('WebSocket error', 'error');
            };
        };

        disconnectBtn.onclick = () => {
            if (ws) ws.close();
        };

        sendBtn.onclick = () => {
            if (!ws || ws.readyState !== WebSocket.OPEN) {
                alert('WebSocket is not connected.');
                return;
            }
            const msg = sendMsg.value;
            ws.send(msg);
            logMsg(msg, 'send');
            sendMsg.value = '';
        };
        </script>
    </body>
</html>